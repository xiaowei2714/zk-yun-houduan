import{d as V,s as q,i as w,j as F,z as U,o as i,a as z,m as o,w as n,e as a,B as c,C as m,p as y,b as E,D as A,G,H as D,I as H,a1 as I,a2 as K,q as J,v as M,K as O}from"./index-B5ZZiHj2.js";import{_ as Q}from"./index.vue_vue_type_script_setup_true_lang-CZUdWqkL.js";import{E as W,a as X}from"./el-table-column-PKkB6MIo.js";import"./el-checkbox-CrJTwOj-.js";import"./el-tag-FirwNlHZ.js";import{E as Y}from"./el-card-CUDqJ9Rp.js";import{u as Z}from"./usePaging-B1hrZWz4.js";import{a as ee}from"./useDictOptions-BEHgkHXI.js";import{_ as te,a as oe,b as ae}from"./edit.vue_vue_type_script_setup_true_name_noticeEdit_lang-Ddu6aRc4.js";import"./el-select-DR2ksDDj.js";import"./index-BCL28wdA.js";import"./token-DI9FKtlJ.js";import"./isEqual-B9SLu2CH.js";import"./_Uint8Array-BhEV8mD6.js";import"./_initCloneObject-jhkwr4OJ.js";import"./el-form-item-IqQ66BIB.js";import"./_baseClone-C_lTRRs9.js";import"./index.vue_vue_type_style_index_0_lang-NSW0SYVA.js";import"./picker-Z93BbVv7.js";import"./index-uGzRPRzd.js";import"./index-UQX5O4eR.js";import"./index-F2yApfq8.js";import"./index-DeUK8bvr.js";import"./index-r42_73Rt.js";import"./el-tree-C3OdE1vo.js";import"./index.vue_vue_type_script_setup_true_lang-B0LdpNAI.js";import"./el-popover-Bxe1rjW5.js";const ne={class:"mt-4"},se={class:"flex mt-4 justify-end"},le=V({name:"noticeLists"}),qe=V({...le,setup(ie){const u=q(),_=w(!1),l=F({type:1}),h=t=>{l.type=t.props.name,p()},C=w([]),x=t=>{C.value=t.map(({id:e})=>e)},{dictData:T}=ee(""),{pager:d,getLists:p,resetParams:re,resetPage:me}=Z({fetchFun:ae,params:l}),$=async()=>{var t;_.value=!0,await D(),(t=u.value)==null||t.open("add",l.type)},B=async t=>{var e,r;_.value=!0,await D(),t.type=l.type,(e=u.value)==null||e.open("edit",l.type),(r=u.value)==null||r.setFormData(t)},k=async t=>{await H.confirm("确定要删除？"),await oe({id:t}),p()};return p(),(t,e)=>{const r=I,N=K,g=Y,P=J,f=M,v=W,L=X,R=Q,b=U("perms"),S=O;return i(),z("div",null,[o(g,{class:"!border-none mb-4",shadow:"never"},{default:n(()=>[o(N,{modelValue:a(l).type,"onUpdate:modelValue":e[0]||(e[0]=s=>a(l).type=s),onTabClick:h},{default:n(()=>[o(r,{label:"首页公告",name:1}),o(r,{label:"话费公告",name:2}),o(r,{label:"电费公告",name:3})]),_:1},8,["modelValue"])]),_:1}),c((i(),m(g,{class:"!border-none",shadow:"never"},{default:n(()=>[c((i(),m(f,{type:"primary",onClick:$},{icon:n(()=>[o(P,{name:"el-icon-Plus"})]),default:n(()=>[e[4]||(e[4]=y(" 新增 "))]),_:1})),[[b,["notice/add"]]]),c((i(),m(f,{disabled:!a(C).length,onClick:e[1]||(e[1]=s=>k(a(C)))},{default:n(()=>e[5]||(e[5]=[y(" 删除 ")])),_:1},8,["disabled"])),[[b,["notice/delete"]]]),E("div",ne,[o(L,{data:a(d).lists,onSelectionChange:x},{default:n(()=>[o(v,{type:"selection",width:"55"}),o(v,{label:"公告标题",prop:"title","show-overflow-tooltip":""}),o(v,{label:"创建时间",prop:"create_time","show-overflow-tooltip":""}),o(v,{label:"操作",width:"120",fixed:"right"},{default:n(({row:s})=>[c((i(),m(f,{type:"primary",link:"",onClick:j=>B(s)},{default:n(()=>e[6]||(e[6]=[y(" 编辑 ")])),_:2},1032,["onClick"])),[[b,["notice/edit"]]]),c((i(),m(f,{type:"danger",link:"",onClick:j=>k(s.id)},{default:n(()=>e[7]||(e[7]=[y(" 删除 ")])),_:2},1032,["onClick"])),[[b,["notice/delete"]]])]),_:1})]),_:1},8,["data"])]),E("div",se,[o(R,{modelValue:a(d),"onUpdate:modelValue":e[2]||(e[2]=s=>A(d)?d.value=s:null),onChange:a(p)},null,8,["modelValue","onChange"])])]),_:1})),[[S,a(d).loading]]),a(_)?(i(),m(te,{key:0,ref_key:"editRef",ref:u,"dict-data":a(T),onSuccess:a(p),onClose:e[3]||(e[3]=s=>_.value=!1)},null,8,["dict-data","onSuccess"])):G("",!0)])}}});export{qe as default};
