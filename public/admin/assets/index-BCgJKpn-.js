import{d as x,s as G,i as h,j as z,y as A,o as i,a as H,m as t,w as o,e as l,p as d,z as _,B as u,b as V,D as J,C as O,J as D,G as K,E as M,v as Q,q as W,H as X}from"./index-TUTPcGtB.js";import{_ as Y}from"./index.vue_vue_type_script_setup_true_lang-Bb-eT6Ya.js";import{E as Z,a as ee}from"./el-table-column-DdSdIFhN.js";import"./el-checkbox-BvgBD3XW.js";import"./el-tag-Dz7mxGZx.js";import{E as te}from"./el-card-C9700OUW.js";import{E as oe,a as le}from"./el-form-item-DY1YiJTE.js";import{E as ae,a as se}from"./el-select-D0BxjOJU.js";import{u as ne}from"./usePaging-1LwsvWT7.js";import{u as ie}from"./useDictOptions-CLZK6Ewr.js";import{_ as re,a as pe,b as de}from"./edit.vue_vue_type_script_setup_true_name_substationEdit_lang-DMEOfc7p.js";import"./isEqual-4FQJ0tWp.js";import"./_Uint8Array-Br1Bv8aR.js";import"./_initCloneObject-BPF8Ocf1.js";import"./_baseClone-m2TTLMcq.js";import"./index-BRjKuX5p.js";import"./token-DI9FKtlJ.js";import"./index-BoNShnAY.js";import"./index-CL3ny9IX.js";const ue={class:"mt-4"},me={class:"flex mt-4 justify-end"},_e=x({name:"substationLists"}),Le=x({..._e,setup(ce){const c=G(),f=h(!1),r=z({user_id:"",status:""}),C=h([]),S=n=>{C.value=n.map(({id:e})=>e)},{dictData:$}=ie(""),{pager:m,getLists:b,resetParams:B,resetPage:P}=ne({fetchFun:de,params:r}),T=async()=>{var n;f.value=!0,await D(),(n=c.value)==null||n.open("add")},F=async n=>{var e,v;f.value=!0,await D(),(e=c.value)==null||e.open("edit"),(v=c.value)==null||v.setFormData(n)},y=async n=>{await K.confirm("确定要删除？"),await pe({id:n}),b()};return b(),(n,e)=>{const v=M,k=oe,E=ae,L=se,p=Q,N=le,g=te,R=W,a=Z,I=ee,U=Y,w=A("perms"),j=X;return i(),H("div",null,[t(g,{class:"!border-none mb-4",shadow:"never"},{default:o(()=>[t(N,{class:"mb-[-16px]",model:l(r),inline:""},{default:o(()=>[t(k,{label:"会员",prop:"user_id"},{default:o(()=>[t(v,{class:"w-[280px]",modelValue:l(r).user_id,"onUpdate:modelValue":e[0]||(e[0]=s=>l(r).user_id=s),clearable:"",placeholder:"请输入昵称或手机号"},null,8,["modelValue"])]),_:1}),t(k,{label:"状态",prop:"status"},{default:o(()=>[t(L,{style:{width:"100px"},modelValue:l(r).status,"onUpdate:modelValue":e[1]||(e[1]=s=>l(r).status=s),placeholder:"请选择"},{default:o(()=>[t(E,{label:"启用",value:1}),t(E,{label:"停用",value:2})]),_:1},8,["modelValue"])]),_:1}),t(k,null,{default:o(()=>[t(p,{type:"primary",onClick:l(P)},{default:o(()=>e[5]||(e[5]=[d("查询")])),_:1},8,["onClick"]),t(p,{onClick:l(B)},{default:o(()=>e[6]||(e[6]=[d("重置")])),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"])]),_:1}),_((i(),u(g,{class:"!border-none",shadow:"never"},{default:o(()=>[_((i(),u(p,{type:"primary",onClick:T},{icon:o(()=>[t(R,{name:"el-icon-Plus"})]),default:o(()=>[e[7]||(e[7]=d(" 新增 "))]),_:1})),[[w,["substation/add"]]]),_((i(),u(p,{disabled:!l(C).length,onClick:e[2]||(e[2]=s=>y(l(C)))},{default:o(()=>e[8]||(e[8]=[d(" 删除 ")])),_:1},8,["disabled"])),[[w,["substation/delete"]]]),V("div",ue,[t(I,{data:l(m).lists,onSelectionChange:S},{default:o(()=>[t(a,{type:"selection",width:"55"}),t(a,{label:"ID",prop:"id","show-overflow-tooltip":""}),t(a,{label:"会员",prop:"user_id","show-overflow-tooltip":""}),t(a,{label:"上级",prop:"parent_user_id","show-overflow-tooltip":""}),t(a,{label:"下级",prop:"parent_user_id","show-overflow-tooltip":""}),t(a,{label:"余额",prop:"parent_user_id","show-overflow-tooltip":""}),t(a,{label:"今日完成",prop:"parent_user_id","show-overflow-tooltip":""}),t(a,{label:"总完成",prop:"parent_user_id","show-overflow-tooltip":""}),t(a,{label:"TG",prop:"parent_user_id","show-overflow-tooltip":""}),t(a,{label:"注册时间",prop:"create_time","show-overflow-tooltip":""}),t(a,{label:"状态",prop:"status","show-overflow-tooltip":""}),t(a,{label:"操作",width:"120",fixed:"right"},{default:o(({row:s})=>[_((i(),u(p,{type:"primary",link:"",onClick:q=>F(s)},{default:o(()=>e[9]||(e[9]=[d(" 编辑 ")])),_:2},1032,["onClick"])),[[w,["substation/edit"]]]),_((i(),u(p,{type:"danger",link:"",onClick:q=>y(s.id)},{default:o(()=>e[10]||(e[10]=[d(" 删除 ")])),_:2},1032,["onClick"])),[[w,["substation/delete"]]])]),_:1})]),_:1},8,["data"])]),V("div",me,[t(U,{modelValue:l(m),"onUpdate:modelValue":e[3]||(e[3]=s=>J(m)?m.value=s:null),onChange:l(b)},null,8,["modelValue","onChange"])])]),_:1})),[[j,l(m).loading]]),l(f)?(i(),u(re,{key:0,ref_key:"editRef",ref:c,"dict-data":l($),onSuccess:l(b),onClose:e[4]||(e[4]=s=>f.value=!1)},null,8,["dict-data","onSuccess"])):O("",!0)])}}});export{Le as default};
