import{I as i,d as V,s as b,i as k,c as C,j as v,o as F,a as I,m as l,w as r,e as s,E as U}from"./index-TUTPcGtB.js";import{E as j,a as q}from"./el-form-item-DY1YiJTE.js";import{P as B}from"./index-BoNShnAY.js";function H(a){return i.get({url:"/substation/lists",params:a})}function P(a){return i.post({url:"/substation/add",params:a})}function A(a){return i.post({url:"/substation/edit",params:a})}function J(a){return i.post({url:"/substation/delete",params:a})}function L(a){return i.get({url:"/substation/detail",params:a})}const N={class:"edit-popup"},O=V({name:"substationEdit"}),K=V({...O,props:{dictData:{type:Object,default:()=>({})}},emits:["success","close"],setup(a,{expose:w,emit:y}){const m=y,f=b(),d=b(),p=k("add"),E=C(()=>p.value=="edit"?"编辑分站":"新增分站"),o=v({id:"",user_id:"",parent_user_id:"",status:""}),g=v({user_id:[{required:!0,message:"请输入会员",trigger:["blur"]}]}),_=async t=>{for(const e in o)t[e]!=null&&t[e]!=null&&(o[e]=t[e])},x=async t=>{const e=await L({id:t.id});_(e)},D=async()=>{var e,n;await((e=f.value)==null?void 0:e.validate());const t={...o};p.value=="edit"?await A(t):await P(t),(n=d.value)==null||n.close(),m("success")},R=(t="add")=>{var e;p.value=t,(e=d.value)==null||e.open()},S=()=>{m("close")};return w({open:R,setFormData:_,getDetail:x}),(t,e)=>{const n=U,c=j,h=q;return F(),I("div",N,[l(B,{ref_key:"popupRef",ref:d,title:s(E),async:!0,width:"550px",onConfirm:D,onClose:S},{default:r(()=>[l(h,{ref_key:"formRef",ref:f,model:s(o),"label-width":"90px",rules:s(g)},{default:r(()=>[l(c,{label:"会员",prop:"user_id"},{default:r(()=>[l(n,{modelValue:s(o).user_id,"onUpdate:modelValue":e[0]||(e[0]=u=>s(o).user_id=u),clearable:"",placeholder:"请输入会员"},null,8,["modelValue"])]),_:1}),l(c,{label:"上级",prop:"parent_user_id"},{default:r(()=>[l(n,{modelValue:s(o).parent_user_id,"onUpdate:modelValue":e[1]||(e[1]=u=>s(o).parent_user_id=u),clearable:"",placeholder:"请输入上级"},null,8,["modelValue"])]),_:1}),l(c,{label:"状态",prop:"status"},{default:r(()=>[l(n,{modelValue:s(o).status,"onUpdate:modelValue":e[2]||(e[2]=u=>s(o).status=u),clearable:"",placeholder:"请输入状态"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title"])])}}});export{K as _,J as a,H as b};
