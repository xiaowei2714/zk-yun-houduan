import{y as d,d as v,s as h,i as C,c as M,j as b,o as F,a as U,m as s,w as u,e as l,E as j}from"./index-CjrUTDc7.js";import{E as q,a as B}from"./el-form-item-DulyNOW3.js";import{P as I}from"./index-I8RQE64U.js";function G(a){return d.get({url:"/merchant/lists",params:a})}function P(a){return d.post({url:"/merchant/add",params:a})}function A(a){return d.post({url:"/merchant/edit",params:a})}function H(a){return d.post({url:"/merchant/delete",params:a})}function L(a){return d.get({url:"/merchant/detail",params:a})}const N={class:"edit-popup"},O=v({name:"merchantEdit"}),J=v({...O,props:{dictData:{type:Object,default:()=>({})}},emits:["success","close"],setup(a,{expose:V,emit:w}){const m=w,f=h(),i=h(),p=C("add"),y=M(()=>p.value=="edit"?"编辑商家":"新增商家"),o=b({id:"",user_id:"",parent_user_id:"",status:""}),E=b({user_id:[{required:!0,message:"请输入会员",trigger:["blur"]}]}),_=async t=>{for(const e in o)t[e]!=null&&t[e]!=null&&(o[e]=t[e])},g=async t=>{const e=await L({id:t.id});_(e)},x=async()=>{var e,r;await((e=f.value)==null?void 0:e.validate());const t={...o};p.value=="edit"?await A(t):await P(t),(r=i.value)==null||r.close(),m("success")},D=(t="add")=>{var e;p.value=t,(e=i.value)==null||e.open()},R=()=>{m("close")};return V({open:D,setFormData:_,getDetail:g}),(t,e)=>{const r=j,c=q,k=B;return F(),U("div",N,[s(I,{ref_key:"popupRef",ref:i,title:l(y),async:!0,width:"550px",onConfirm:x,onClose:R},{default:u(()=>[s(k,{ref_key:"formRef",ref:f,model:l(o),"label-width":"90px",rules:l(E)},{default:u(()=>[s(c,{label:"会员",prop:"user_id"},{default:u(()=>[s(r,{modelValue:l(o).user_id,"onUpdate:modelValue":e[0]||(e[0]=n=>l(o).user_id=n),clearable:"",placeholder:"请输入会员"},null,8,["modelValue"])]),_:1}),s(c,{label:"上级",prop:"parent_user_id"},{default:u(()=>[s(r,{modelValue:l(o).parent_user_id,"onUpdate:modelValue":e[1]||(e[1]=n=>l(o).parent_user_id=n),clearable:"",placeholder:"请输入上级"},null,8,["modelValue"])]),_:1}),s(c,{label:"状态",prop:"status"},{default:u(()=>[s(r,{modelValue:l(o).status,"onUpdate:modelValue":e[2]||(e[2]=n=>l(o).status=n),clearable:"",placeholder:"请输入状态"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title"])])}}});export{J as _,H as a,G as b};
