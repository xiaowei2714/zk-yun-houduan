import{d as h,s as R,i as k,j as T,z as M,o as i,a as j,B as m,e as a,C as r,w as s,m as t,p as w,b as g,t as q,D as F,G as z,H as y,I as A,q as G,v as H,K as I}from"./index-18RI31ad.js";import{E as K}from"./el-card-CMOBf6qu.js";import{_ as U}from"./index.vue_vue_type_script_setup_true_lang-CKbCZhSh.js";import{E as J,a as O}from"./el-table-column-DathHr3c.js";import"./el-checkbox-8-2_15A-.js";import"./el-tag-CmSb0PPj.js";import{u as Q}from"./usePaging-CTGUxpYc.js";import{a as W}from"./useDictOptions-CWc3p11Z.js";import{_ as X,a as Y,b as Z}from"./edit.vue_vue_type_script_setup_true_name_setMealEdit_lang-DcSkHgXm.js";import"./el-select-CfAsf02K.js";import"./index-CNdvlH72.js";import"./token-DI9FKtlJ.js";import"./isEqual-CXEfEThA.js";import"./_Uint8Array-By2EQjnj.js";import"./_initCloneObject-2-wVW5oN.js";import"./index.vue_vue_type_style_index_0_lang-BwJq_EOV.js";import"./picker-CQcOqVgM.js";import"./index-D9Off26v.js";import"./index-OKpwEdFd.js";import"./index-BYWjl9uZ.js";import"./index-DiGyJZie.js";import"./index-CnYMF551.js";import"./_baseClone-BVTnDBi9.js";import"./el-tree-CTReGe6X.js";import"./index.vue_vue_type_script_setup_true_lang-CldSQTnr.js";import"./el-popover-CTIGYKJy.js";import"./el-form-item-D1SeYdZJ.js";/* empty css                          */const ee={class:"mt-4"},te={class:"flex mt-4 justify-end"},oe=h({name:"setMealLists"}),Re=h({...oe,setup(ae){const d=R(),c=k(!1),D=T({}),b=k([]),E=o=>{b.value=o.map(({id:e})=>e)},{dictData:x}=W(""),{pager:p,getLists:u,resetParams:se,resetPage:le}=Q({fetchFun:Z,params:D}),S=async()=>{var o;c.value=!0,await y(),(o=d.value)==null||o.open("add")},V=async o=>{var e,f;c.value=!0,await y(),(e=d.value)==null||e.open("edit"),(f=d.value)==null||f.setFormData(o)},C=async o=>{await A.confirm("确定要删除？"),await Y({id:o}),u()};return u(),(o,e)=>{const f=G,_=H,l=J,$=O,B=U,P=K,v=M("perms"),L=I;return i(),j("div",null,[m((i(),r(P,{class:"!border-none",shadow:"never"},{default:s(()=>[m((i(),r(_,{type:"primary",onClick:S},{icon:s(()=>[t(f,{name:"el-icon-Plus"})]),default:s(()=>[e[3]||(e[3]=w(" 新增 "))]),_:1})),[[v,["set_meal/add"]]]),m((i(),r(_,{disabled:!a(b).length,onClick:e[0]||(e[0]=n=>C(a(b)))},{default:s(()=>e[4]||(e[4]=[w(" 删除 ")])),_:1},8,["disabled"])),[[v,["set_meal/delete"]]]),g("div",ee,[t($,{data:a(p).lists,onSelectionChange:E},{default:s(()=>[t(l,{type:"selection",width:"55"}),t(l,{label:"套餐名称",prop:"name","show-overflow-tooltip":""}),t(l,{label:"运营商",prop:"operator_txt","show-overflow-tooltip":""}),t(l,{label:"价格",prop:"price","show-overflow-tooltip":""}),t(l,{label:"折扣",prop:"discount","show-overflow-tooltip":""}),t(l,{label:"排序",prop:"sort","show-overflow-tooltip":""}),t(l,{label:"状态",prop:"status","show-overflow-tooltip":""},{default:s(({row:n})=>[g("span",null,q(n.status==1?"上架":"下架"),1)]),_:1}),t(l,{label:"操作",width:"120",fixed:"right"},{default:s(({row:n})=>[m((i(),r(_,{type:"primary",link:"",onClick:N=>V(n)},{default:s(()=>e[5]||(e[5]=[w(" 编辑 ")])),_:2},1032,["onClick"])),[[v,["set_meal/edit"]]]),m((i(),r(_,{type:"danger",link:"",onClick:N=>C(n.id)},{default:s(()=>e[6]||(e[6]=[w(" 删除 ")])),_:2},1032,["onClick"])),[[v,["set_meal/delete"]]])]),_:1})]),_:1},8,["data"])]),g("div",te,[t(B,{modelValue:a(p),"onUpdate:modelValue":e[1]||(e[1]=n=>F(p)?p.value=n:null),onChange:a(u)},null,8,["modelValue","onChange"])])]),_:1})),[[L,a(p).loading]]),a(c)?(i(),r(X,{key:0,ref_key:"editRef",ref:d,"dict-data":a(x),onSuccess:a(u),onClose:e[2]||(e[2]=n=>c.value=!1)},null,8,["dict-data","onSuccess"])):z("",!0)])}}});export{Re as default};
