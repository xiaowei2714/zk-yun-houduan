import{d as I,s as d,j as f,c as N,V as i,I as R,o as u,C as _,w as c,b as x,m as h,a as V,F as g,r as q,E as j}from"./index-CjrUTDc7.js";import{E as P,a as $}from"./el-form-item-DulyNOW3.js";import{P as A}from"./index-I8RQE64U.js";const D={class:"pr-8"},z=I({__name:"set-discount",props:{show:{type:Boolean,required:!0},list:{type:Array,required:!0},value:{type:[Number,String],required:!0}},emits:["update:show","confirm"],setup(y,{emit:b}){const p=d(),t=y,r=b,n=f({action:1,num:"",remark:""});f({meal_list:[]});const l=d(),v=N(()=>Number(t.value)+Number(n.num)*(n.action==1?1:-1)),w=(e,a)=>{r("update-discount",{index:a,value:parseFloat(e)||0})},k=async()=>{r("confirm",t.list)},C=()=>{var e;r("update:show",!1),(e=p.value)==null||e.resetFields()};return i(()=>t.show,e=>{var a,s;e?(a=l.value)==null||a.open():(s=l.value)==null||s.close()}),i(v,e=>{e<0&&(R.msgError("调整后余额需大于0"),n.num="")}),(e,a)=>{const s=j,E=P,F=$;return u(),_(A,{ref_key:"popupRef",ref:l,title:"设置折扣",width:"500px",onConfirm:k,async:!0,onClose:C},{default:c(()=>[x("div",D,[h(F,{ref_key:"formRef",ref:p,model:t.list,"label-width":"120px"},{default:c(()=>[(u(!0),V(g,null,q(t.list,(o,m)=>(u(),_(E,{key:m,label:`${(o==null?void 0:o.name)||""}${(o==null?void 0:o.type)===1?"(话费)":"(电费)"}`},{default:c(()=>[h(s,{"model-value":o==null?void 0:o.discount,placeholder:"请输入折扣",type:"number",onInput:B=>w(B,m)},null,8,["model-value","onInput"])]),_:2},1032,["label"]))),128))]),_:1},8,["model"])])]),_:1},512)}}});export{z as _};
