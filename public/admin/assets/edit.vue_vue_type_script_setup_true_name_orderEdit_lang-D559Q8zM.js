import{y as s,d as v,s as b,i as O,c as R,j as y,o as C,a as F,m as t,w as r,e as a,eZ as w,E as H}from"./index-18RI31ad.js";import{E as P,a as j}from"./el-form-item-D1SeYdZJ.js";import{E as B}from"./el-date-picker-CSi3Nk4B.js";import{P as I}from"./index-D9Off26v.js";function J(n){return s.get({url:"/order/lists",params:n})}function q(n){return s.post({url:"/order/add",params:n})}function A(n){return s.post({url:"/order/edit",params:n})}function K(n){return s.post({url:"/order/delete",params:n})}function L(n){return s.get({url:"/order/detail",params:n})}const N={class:"edit-popup"},S=v({name:"orderEdit"}),Q=v({...S,props:{dictData:{type:Object,default:()=>({})}},emits:["success","close"],setup(n,{expose:U,emit:g}){const c=g,_=b(),m=b(),i=O("add"),D=R(()=>i.value=="edit"?"编辑订单":"新增订单"),l=y({id:"",sn:"",user_id:"",account:"",account_type:"",price:"",recharge_up_price:"",recharge_down_price:"",balances_price:"",status:"",start_time:"",end_time:"",pay_time:""}),x=y({}),f=async p=>{for(const e in l)p[e]!=null&&p[e]!=null&&(l[e]=p[e]);l.start_time=w(l.start_time,"yyyy-mm-dd hh:MM:ss"),l.end_time=w(l.end_time,"yyyy-mm-dd hh:MM:ss")},E=async p=>{const e=await L({id:p.id});f(e)},h=async()=>{var e,d;await((e=_.value)==null?void 0:e.validate());const p={...l};i.value=="edit"?await A(p):await q(p),(d=m.value)==null||d.close(),c("success")},M=(p="add")=>{var e;i.value=p,(e=m.value)==null||e.open()},Y=()=>{c("close")};return U({open:M,setFormData:f,getDetail:E}),(p,e)=>{const d=H,u=P,V=B,k=j;return C(),F("div",N,[t(I,{ref_key:"popupRef",ref:m,title:a(D),async:!0,width:"550px",onConfirm:h,onClose:Y},{default:r(()=>[t(k,{ref_key:"formRef",ref:_,model:a(l),"label-width":"90px",rules:a(x)},{default:r(()=>[t(u,{label:"单号",prop:"sn"},{default:r(()=>[t(d,{modelValue:a(l).sn,"onUpdate:modelValue":e[0]||(e[0]=o=>a(l).sn=o),clearable:"",placeholder:"请输入单号"},null,8,["modelValue"])]),_:1}),t(u,{label:"客户",prop:"user_id"},{default:r(()=>[t(d,{modelValue:a(l).user_id,"onUpdate:modelValue":e[1]||(e[1]=o=>a(l).user_id=o),clearable:"",placeholder:"请输入客户"},null,8,["modelValue"])]),_:1}),t(u,{label:"充值账户",prop:"account"},{default:r(()=>[t(d,{modelValue:a(l).account,"onUpdate:modelValue":e[2]||(e[2]=o=>a(l).account=o),clearable:"",placeholder:"请输入充值账户"},null,8,["modelValue"])]),_:1}),t(u,{label:"运营商",prop:"account_type"},{default:r(()=>[t(d,{modelValue:a(l).account_type,"onUpdate:modelValue":e[3]||(e[3]=o=>a(l).account_type=o),clearable:"",placeholder:"请输入运营商"},null,8,["modelValue"])]),_:1}),t(u,{label:"金额",prop:"price"},{default:r(()=>[t(d,{modelValue:a(l).price,"onUpdate:modelValue":e[4]||(e[4]=o=>a(l).price=o),clearable:"",placeholder:"请输入金额"},null,8,["modelValue"])]),_:1}),t(u,{label:"充值前余额",prop:"recharge_up_price"},{default:r(()=>[t(d,{modelValue:a(l).recharge_up_price,"onUpdate:modelValue":e[5]||(e[5]=o=>a(l).recharge_up_price=o),clearable:"",placeholder:"请输入充值前余额"},null,8,["modelValue"])]),_:1}),t(u,{label:"充值后余额",prop:"recharge_down_price"},{default:r(()=>[t(d,{modelValue:a(l).recharge_down_price,"onUpdate:modelValue":e[6]||(e[6]=o=>a(l).recharge_down_price=o),clearable:"",placeholder:"请输入充值后余额"},null,8,["modelValue"])]),_:1}),t(u,{label:"到账金额",prop:"balances_price"},{default:r(()=>[t(d,{modelValue:a(l).balances_price,"onUpdate:modelValue":e[7]||(e[7]=o=>a(l).balances_price=o),clearable:"",placeholder:"请输入到账金额"},null,8,["modelValue"])]),_:1}),t(u,{label:"状态",prop:"status"},{default:r(()=>[t(d,{modelValue:a(l).status,"onUpdate:modelValue":e[8]||(e[8]=o=>a(l).status=o),clearable:"",placeholder:"请输入状态"},null,8,["modelValue"])]),_:1}),t(u,{label:"开始处理时间",prop:"start_time"},{default:r(()=>[t(V,{class:"flex-1 !flex",modelValue:a(l).start_time,"onUpdate:modelValue":e[9]||(e[9]=o=>a(l).start_time=o),clearable:"",type:"datetime","value-format":"YYYY-MM-DD HH:mm:ss",placeholder:"选择开始处理时间"},null,8,["modelValue"])]),_:1}),t(u,{label:"结束处理时间",prop:"end_time"},{default:r(()=>[t(V,{class:"flex-1 !flex",modelValue:a(l).end_time,"onUpdate:modelValue":e[10]||(e[10]=o=>a(l).end_time=o),clearable:"",type:"datetime","value-format":"YYYY-MM-DD HH:mm:ss",placeholder:"选择结束处理时间"},null,8,["modelValue"])]),_:1}),t(u,{label:"支付时间",prop:"pay_time"},{default:r(()=>[t(d,{modelValue:a(l).pay_time,"onUpdate:modelValue":e[11]||(e[11]=o=>a(l).pay_time=o),clearable:"",placeholder:"请输入支付时间"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title"])])}}});export{Q as _,K as a,J as b};
