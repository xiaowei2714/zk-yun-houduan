import{d as k,j as y,N as j,O as A,y as F,o as _,a as I,m as e,w as n,e as t,n as K,p as u,z as f,B as w,Q as R,b as q,D as M,E as H,v as O,$ as Q,H as G}from"./index-TUTPcGtB.js";import{_ as J}from"./index.vue_vue_type_script_setup_true_lang-Bb-eT6Ya.js";import{E as S,a as W}from"./el-table-column-DdSdIFhN.js";import"./el-checkbox-BvgBD3XW.js";import"./el-tag-Dz7mxGZx.js";import{E as X}from"./el-card-C9700OUW.js";import{E as Y,a as Z}from"./el-form-item-DY1YiJTE.js";import{_ as ee}from"./index.vue_vue_type_script_setup_true_lang-BrQjDzf0.js";import{_ as te}from"./index.vue_vue_type_script_setup_true_lang-CBr3MyAR.js";import{b as g,c as ae,s as oe}from"./consumer-BYOzQ9UG.js";import{u as ne}from"./usePaging-1LwsvWT7.js";import{_ as se}from"./set-discount.vue_vue_type_script_setup_true_lang-Dp07StM1.js";import"./el-select-D0BxjOJU.js";import"./index-BRjKuX5p.js";import"./token-DI9FKtlJ.js";import"./isEqual-4FQJ0tWp.js";import"./_Uint8Array-Br1Bv8aR.js";import"./_initCloneObject-BPF8Ocf1.js";import"./_baseClone-m2TTLMcq.js";/* empty css                       */import"./el-radio--P7fmVj5.js";import"./index-BoNShnAY.js";import"./index-CL3ny9IX.js";import"./el-date-picker-BZoC0jGa.js";const le={class:"flex justify-end mt-4"},ie=k({name:"consumerLists"}),Pe=k({...ie,setup(re){const i=y({keyword:"",channel:"",create_time_start:"",create_time_end:""}),l=y({id:0,show:!1,meal_list:[],new_list:[]}),C=(r,a)=>{l.meal_list[r.index].discount=r.value},E=async r=>{l.id=r.id;const a=await ae({user_id:r.id});l.meal_list=a.list,l.show=!0},x=async r=>{await oe({list:l.meal_list}),l.show=!1,d()},{pager:m,getLists:d,resetPage:b,resetParams:D}=ne({fetchFun:g,params:i});return j(()=>{d()}),d(),(r,a)=>{const T=H,c=Y,V=te,p=O,U=ee,z=Z,v=X,s=S,B=Q,L=A("router-link"),$=W,P=J,h=F("perms"),N=G;return _(),I("div",null,[e(v,{class:"!border-none",shadow:"never"},{default:n(()=>[e(z,{ref:"formRef",class:"mb-[-16px]",model:t(i),inline:!0},{default:n(()=>[e(c,{class:"w-[280px]",label:"用户信息"},{default:n(()=>[e(T,{modelValue:t(i).keyword,"onUpdate:modelValue":a[0]||(a[0]=o=>t(i).keyword=o),placeholder:"账号/昵称/手机号码",clearable:"",onKeyup:K(t(b),["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),e(c,{label:"注册时间"},{default:n(()=>[e(V,{startTime:t(i).create_time_start,"onUpdate:startTime":a[1]||(a[1]=o=>t(i).create_time_start=o),endTime:t(i).create_time_end,"onUpdate:endTime":a[2]||(a[2]=o=>t(i).create_time_end=o)},null,8,["startTime","endTime"])]),_:1}),e(c,null,{default:n(()=>[e(p,{type:"primary",onClick:t(b)},{default:n(()=>a[5]||(a[5]=[u("查询")])),_:1},8,["onClick"]),e(p,{onClick:t(D)},{default:n(()=>a[6]||(a[6]=[u("重置")])),_:1},8,["onClick"]),e(U,{class:"ml-2.5","fetch-fun":t(g),params:t(i),"page-size":t(m).size},null,8,["fetch-fun","params","page-size"])]),_:1})]),_:1},8,["model"])]),_:1}),e(v,{class:"!border-none mt-4",shadow:"never"},{default:n(()=>[f((_(),w($,{size:"large",data:t(m).lists},{default:n(()=>[e(s,{label:"ID",prop:"sn","min-width":"100"}),e(s,{label:"头像","min-width":"100"},{default:n(({row:o})=>[e(B,{src:o.avatar,size:50},null,8,["src"])]),_:1}),e(s,{label:"昵称",prop:"nickname","min-width":"100"}),e(s,{label:"账号",prop:"account","min-width":"120"}),e(s,{label:"上级",prop:"parent_user","min-width":"120"}),e(s,{label:"下级",prop:"subordinate_user","min-width":"120"}),e(s,{label:"余额",prop:"user_money","min-width":"120"}),e(s,{label:"今日消费",prop:"user_money","min-width":"120"}),e(s,{label:"总消费",prop:"user_money","min-width":"120"}),e(s,{label:"注册时间",prop:"create_time","min-width":"120"}),e(s,{label:"操作",width:"120",fixed:"right"},{default:n(({row:o})=>[f((_(),w(p,{type:"primary",link:"",onClick:me=>E(o)},{default:n(()=>a[7]||(a[7]=[u(" 折扣 ")])),_:2},1032,["onClick"])),[[h,["notice/edit"]]]),f((_(),w(p,{type:"primary",link:""},{default:n(()=>[e(L,{to:{path:t(R)("user.user/detail"),query:{id:o.id}}},{default:n(()=>a[8]||(a[8]=[u(" 详情 ")])),_:2},1032,["to"])]),_:2},1024)),[[h,["user.user/detail"]]])]),_:1})]),_:1},8,["data"])),[[N,t(m).loading]]),q("div",le,[e(P,{modelValue:t(m),"onUpdate:modelValue":a[3]||(a[3]=o=>M(m)?m.value=o:null),onChange:t(d)},null,8,["modelValue","onChange"])])]),_:1}),e(se,{show:t(l).show,"onUpdate:show":a[4]||(a[4]=o=>t(l).show=o),value:t(l).id,list:t(l).meal_list,onConfirm:x,onUpdateDiscount:C},null,8,["show","value","list"])])}}});export{Pe as default};
