import{y as i,d as w,s as y,i as C,c as F,j as v,o as j,a as B,m as s,w as c,e as l,E as I}from"./index-DAkljIww.js";import{E as P,a as U}from"./el-form-item-Bv57yIkZ.js";import{_ as q}from"./index.vue_vue_type_style_index_0_lang-qI8fJE3M.js";import{P as A}from"./index-CtrsSxwh.js";function K(o){return i.get({url:"/notice/lists",params:o})}function L(o){return i.post({url:"/notice/add",params:o})}function O(o){return i.post({url:"/notice/edit",params:o})}function M(o){return i.post({url:"/notice/delete",params:o})}function S(o){return i.get({url:"/notice/detail",params:o})}const T={class:"edit-popup"},$=w({name:"noticeEdit"}),Q=w({...$,props:{dictData:{type:Object,default:()=>({})}},emits:["success","close"],setup(o,{expose:E,emit:b}){const d=b,m=y(),r=y(),p=C("add"),h=F(()=>p.value=="edit"?"编辑公告":"新增公告"),n=v({id:"",title:"",content:"",type:""}),x=v({}),f=async t=>{for(const e in n)t[e]!=null&&t[e]!=null&&(n[e]=t[e])},V=async t=>{const e=await S({id:t.id});f(e)},D=async()=>{var e,a;await((e=m.value)==null?void 0:e.validate());const t={...n};p.value=="edit"?await O(t):await L(t),(a=r.value)==null||a.close(),d("success")},N=(t="add",e)=>{var a;p.value=t,n.type=e,console.log(e),(a=r.value)==null||a.open()},R=()=>{d("close")};return E({open:N,setFormData:f,getDetail:V}),(t,e)=>{const a=I,_=P,g=q,k=U;return j(),B("div",T,[s(A,{ref_key:"popupRef",ref:r,title:l(h),async:!0,width:"550px",onConfirm:D,onClose:R},{default:c(()=>[s(k,{ref_key:"formRef",ref:m,model:l(n),"label-width":"90px",rules:l(x)},{default:c(()=>[s(_,{label:"公告标题",prop:"title"},{default:c(()=>[s(a,{modelValue:l(n).title,"onUpdate:modelValue":e[0]||(e[0]=u=>l(n).title=u),clearable:"",placeholder:"请输入公告标题"},null,8,["modelValue"])]),_:1}),s(_,{label:"公告内容",prop:"content"},{default:c(()=>[s(g,{class:"flex-1",modelValue:l(n).content,"onUpdate:modelValue":e[1]||(e[1]=u=>l(n).content=u),height:500},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title"])])}}});export{Q as _,M as a,K as b};
