import{d as x,s as g,i as E,y as L,o as a,a as $,m as t,w as n,b as y,z as u,B as m,p as h,e as l,D as z,C as D,J as C,G as P,q as j,v as q,H as G}from"./index-TUTPcGtB.js";import{E as H}from"./el-card-C9700OUW.js";import{_ as I}from"./index.vue_vue_type_script_setup_true_lang-Bb-eT6Ya.js";import{E as J,a as U}from"./el-table-column-DdSdIFhN.js";import"./el-checkbox-BvgBD3XW.js";import"./el-tag-Dz7mxGZx.js";import{c as K,d as M}from"./role-B8zryJaa.js";import{u as O}from"./usePaging-1LwsvWT7.js";import{_ as Q}from"./auth.vue_vue_type_script_setup_true_lang-Cr_vwBxc.js";import{_ as W}from"./edit.vue_vue_type_script_setup_true_lang-C6-EQ7C9.js";import"./el-select-D0BxjOJU.js";import"./index-BRjKuX5p.js";import"./token-DI9FKtlJ.js";import"./isEqual-4FQJ0tWp.js";import"./_Uint8Array-Br1Bv8aR.js";import"./_initCloneObject-BPF8Ocf1.js";import"./el-form-item-DY1YiJTE.js";import"./_baseClone-m2TTLMcq.js";import"./el-tree-DEhDC8HP.js";import"./menu-CBL0aYuS.js";import"./index-BoNShnAY.js";import"./index-CL3ny9IX.js";const X={class:"role-lists"},Y={class:"mt-4"},Z={class:"flex justify-end mt-4"},ee=x({name:"role"}),Ee=x({...ee,setup(te){const c=g(),k=g(),f=E(!1),w=E(!1),{pager:d,getLists:p}=O({fetchFun:M}),V=async()=>{var o;f.value=!0,await C(),(o=c.value)==null||o.open("add")},B=async o=>{var e,s;f.value=!0,await C(),(e=c.value)==null||e.open("edit"),(s=c.value)==null||s.setFormData(o)},R=async o=>{var e,s;w.value=!0,await C(),(e=k.value)==null||e.open(),(s=k.value)==null||s.setFormData(o)},N=async o=>{await P.confirm("确定要删除？"),await K({id:o}),p()};return p(),(o,e)=>{const s=j,_=q,i=J,S=U,T=I,A=H,v=L("perms"),F=G;return a(),$("div",X,[t(A,{class:"!border-none",shadow:"never"},{default:n(()=>[y("div",null,[u((a(),m(_,{type:"primary",onClick:V},{icon:n(()=>[t(s,{name:"el-icon-Plus"})]),default:n(()=>[e[3]||(e[3]=h(" 新增 "))]),_:1})),[[v,["auth.role/add"]]])]),u((a(),$("div",Y,[y("div",null,[t(S,{data:l(d).lists,size:"large"},{default:n(()=>[t(i,{prop:"id",label:"ID","min-width":"100"}),t(i,{prop:"name",label:"名称","min-width":"150"}),t(i,{prop:"desc",label:"备注","min-width":"150","show-overflow-tooltip":""}),t(i,{prop:"sort",label:"排序","min-width":"100"}),t(i,{prop:"num",label:"管理员人数","min-width":"100"}),t(i,{prop:"create_time",label:"创建时间","min-width":"180"}),t(i,{label:"操作",width:"200",fixed:"right"},{default:n(({row:r})=>[u((a(),m(_,{link:"",type:"primary",onClick:b=>B(r)},{default:n(()=>e[4]||(e[4]=[h(" 编辑 ")])),_:2},1032,["onClick"])),[[v,["auth.role/edit"]]]),u((a(),m(_,{link:"",type:"primary",onClick:b=>R(r)},{default:n(()=>e[5]||(e[5]=[h(" 分配权限 ")])),_:2},1032,["onClick"])),[[v,["auth.role/edit"]]]),u((a(),m(_,{link:"",type:"danger",onClick:b=>N(r.id)},{default:n(()=>e[6]||(e[6]=[h(" 删除 ")])),_:2},1032,["onClick"])),[[v,["auth.role/delete"]]])]),_:1})]),_:1},8,["data"])]),y("div",Z,[t(T,{modelValue:l(d),"onUpdate:modelValue":e[0]||(e[0]=r=>z(d)?d.value=r:null),onChange:l(p)},null,8,["modelValue","onChange"])])])),[[F,l(d).loading]])]),_:1}),l(f)?(a(),m(W,{key:0,ref_key:"editRef",ref:c,onSuccess:l(p),onClose:e[1]||(e[1]=r=>f.value=!1)},null,8,["onSuccess"])):D("",!0),l(w)?(a(),m(Q,{key:1,ref_key:"authRef",ref:k,onSuccess:l(p),onClose:e[2]||(e[2]=r=>w.value=!1)},null,8,["onSuccess"])):D("",!0)])}}});export{Ee as default};
