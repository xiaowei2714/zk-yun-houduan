import{_ as $}from"./index.vue_vue_type_style_index_0_lang-NSW0SYVA.js";import{y,d as M,s as q,i as H,c as J,j as w,o as f,a as h,m as l,w as d,e as t,b as n,p as m,F as D,r as S,C as z,E as K,v as Q}from"./index-B5ZZiHj2.js";import{E as W,a as X}from"./el-form-item-IqQ66BIB.js";/* empty css                          */import{E as Y,a as Z}from"./el-checkbox-CrJTwOj-.js";import"./el-tag-FirwNlHZ.js";import{E as ee,a as le}from"./el-select-DR2ksDDj.js";import{P as te}from"./index-uGzRPRzd.js";function Re(i){return y.get({url:"/set_meal/lists",params:i})}function oe(i){return y.post({url:"/set_meal/add",params:i})}function ae(i){return y.post({url:"/set_meal/edit",params:i})}function Be(i){return y.post({url:"/set_meal/delete",params:i})}function ne(i){return y.get({url:"/set_meal/detail",params:i})}const de={class:"edit-popup"},se={style:{display:"flex"}},pe={style:{display:"flex"}},re={style:{}},ue={style:{"margin-left":"20px"}},ie={style:{"margin-left":"20px"}},me={style:{"margin-left":"20px"}},_e={style:{"margin-left":"20px"}},fe={style:{display:"flex","margin-top":"10px"}},ye={style:{"margin-left":"20px"}},be={style:{"margin-left":"20px"}},xe={style:{display:"flex","margin-top":"10px"}},Ve={style:{display:"flex","margin-top":"10px"}},ce={style:{"margin-left":"20px"}},ve={style:{display:"flex","align-items":"center"}},ge={style:{"margin-top":"15px"}},we={style:{display:"flex","align-items":"center"}},he={style:{"margin-top":"15px"}},Ue=M({name:"setMealEdit"}),Fe=M({...Ue,props:{dictData:{type:Object,default:()=>({})}},emits:["success","close"],setup(i,{expose:R,emit:B}){const U=B,E=q(),x=q(),V=H("add"),F=J(()=>V.value=="edit"?"编辑套餐":"新增套餐"),a=w({id:"",name:"",type:"",show_type:"",price:"",discount:"",operator:[],forbid_buy_city:"",sort:"",day_astrict_num:"",meanwhile_order_num:"",user_required_info:[],merchant_required_info:[],allow_buy_nums:"",forbid_buy_nums:"",status:"",desc:""}),p=w({name:"",name2:"",tip:"",tip2:""}),I=()=>{a.user_required_info.push({name:p.name,tip:p.tip}),p.name="",p.tip=""},N=()=>{a.merchant_required_info.push({name:p.name2,tip:p.tip2}),p.name2="",p.tip2=""},j=w({}),k=async u=>{for(const e in a)u[e]!=null&&u[e]!=null&&(a[e]=u[e])},L=async u=>{const e=await ne({id:u.id});k(e)},O=async()=>{var e,s;await((e=E.value)==null?void 0:e.validate());const u={...a};V.value=="edit"?await ae(u):await oe(u),(s=x.value)==null||s.close(),U("success")},P=(u="add")=>{var e;V.value=u,(e=x.value)==null||e.open()},T=()=>{U("close")};return R({open:P,setFormData:k,getDetail:L}),(u,e)=>{const s=K,r=W,_=ee,c=le,b=Y,A=Z,C=Q,v=X,G=$;return f(),h("div",de,[l(te,{ref_key:"popupRef",ref:x,title:t(F),async:!0,width:"1050px",onConfirm:O,onClose:T},{default:d(()=>[l(v,{ref_key:"formRef",ref:E,"label-position":"top",model:t(a),"label-width":"90px",rules:t(j)},{default:d(()=>[n("div",se,[n("div",null,[l(r,{prop:"name"},{label:d(()=>e[18]||(e[18]=[n("span",null,[m("套餐名称 "),n("small",{style:{color:"red","font-size":"10px","margin-left":"8px"}},'填写的时候带数字面值且只有面值的数字，比如“100元”“快充100”“四川100电费"')],-1)])),default:d(()=>[l(s,{modelValue:t(a).name,"onUpdate:modelValue":e[0]||(e[0]=o=>t(a).name=o),clearable:"",placeholder:"请输入套餐名称"},null,8,["modelValue"])]),_:1})])]),n("div",pe,[n("div",re,[l(r,{label:"类型",prop:"type"},{default:d(()=>[l(c,{modelValue:t(a).type,"onUpdate:modelValue":e[1]||(e[1]=o=>t(a).type=o),style:{width:"100px"},placeholder:"请选择"},{default:d(()=>[l(_,{label:"话费",value:1}),l(_,{label:"电费",value:2})]),_:1},8,["modelValue"])]),_:1})]),n("div",ue,[l(r,{label:"显示端",prop:"show_type"},{default:d(()=>[l(c,{modelValue:t(a).show_type,"onUpdate:modelValue":e[2]||(e[2]=o=>t(a).show_type=o),style:{width:"130px"},placeholder:"请选择"},{default:d(()=>[l(_,{label:"全端显示",value:1}),l(_,{label:"安卓端显示",value:2}),l(_,{label:"苹果端显示",value:3})]),_:1},8,["modelValue"])]),_:1})]),n("div",ie,[l(r,{label:"每日产品限制",prop:"day_astrict_num"},{default:d(()=>[l(s,{modelValue:t(a).day_astrict_num,"onUpdate:modelValue":e[3]||(e[3]=o=>t(a).day_astrict_num=o),type:"number",clearable:"",placeholder:"请输入每日产品限制"},null,8,["modelValue"])]),_:1})]),n("div",me,[l(r,{label:"同时存在订单",prop:"meanwhile_order_num"},{default:d(()=>[l(s,{modelValue:t(a).meanwhile_order_num,"onUpdate:modelValue":e[4]||(e[4]=o=>t(a).meanwhile_order_num=o),type:"number",clearable:"",placeholder:"请输入同时存在订单"},null,8,["modelValue"])]),_:1})]),n("div",_e,[l(r,{label:"排序",prop:"sort"},{default:d(()=>[l(s,{modelValue:t(a).sort,"onUpdate:modelValue":e[5]||(e[5]=o=>t(a).sort=o),type:"number",clearable:"",placeholder:"请输入排序"},null,8,["modelValue"])]),_:1})])]),n("div",fe,[n("div",null,[l(r,{label:"价格",prop:"price"},{default:d(()=>[l(s,{modelValue:t(a).price,"onUpdate:modelValue":e[6]||(e[6]=o=>t(a).price=o),type:"number",clearable:"",placeholder:"请输入价格"},null,8,["modelValue"])]),_:1})]),n("div",ye,[l(r,{label:"折扣",prop:"discount"},{label:d(()=>e[19]||(e[19]=[n("span",null,[m("折扣 "),n("small",{style:{color:"#999999","font-size":"10px","margin-left":"8px"}},"店铺最高可设置的售价，0代表不限制")],-1)])),default:d(()=>[l(s,{modelValue:t(a).discount,"onUpdate:modelValue":e[7]||(e[7]=o=>t(a).discount=o),type:"number",clearable:"",placeholder:"请输入折扣"},null,8,["modelValue"])]),_:1})]),n("div",be,[l(r,{label:"运营商",prop:"operator"},{label:d(()=>e[20]||(e[20]=[n("span",null,[m("运营商 "),n("small",{style:{color:"#999999","font-size":"10px","margin-left":"8px"}},"话费/流量必选")],-1)])),default:d(()=>[l(A,{modelValue:t(a).operator,"onUpdate:modelValue":e[8]||(e[8]=o=>t(a).operator=o)},{default:d(()=>[l(b,{label:"移动"}),l(b,{label:"电信"}),l(b,{label:"联通"}),l(b,{label:"虚拟"})]),_:1},8,["modelValue"])]),_:1})])]),n("div",xe,[n("div",null,[l(r,{label:"禁止下单省份",prop:"forbid_buy_city"},{label:d(()=>e[21]||(e[21]=[n("span",null,[m("禁止下单省份 "),n("small",{style:{color:"#999999","font-size":"10px","margin-left":"8px"}},"话费/流量/电费生效")],-1)])),default:d(()=>[l(s,{modelValue:t(a).forbid_buy_city,"onUpdate:modelValue":e[9]||(e[9]=o=>t(a).forbid_buy_city=o),style:{width:"400px"},clearable:"",placeholder:"多个用英文,隔开，如:广东省,福建省"},null,8,["modelValue"])]),_:1})])]),n("div",Ve,[n("div",null,[l(r,{label:"允许下单号段",prop:"allow_buy_nums"},{label:d(()=>e[22]||(e[22]=[n("span",null,[m("允许下单号段 "),n("small",{style:{color:"#999999","font-size":"10px","margin-left":"8px"}},"话费/流量生效")],-1)])),default:d(()=>[l(s,{modelValue:t(a).allow_buy_nums,"onUpdate:modelValue":e[10]||(e[10]=o=>t(a).allow_buy_nums=o),style:{width:"400px"},clearable:"",placeholder:"多个用英文,隔开，如：147,171"},null,8,["modelValue"])]),_:1})]),n("div",ce,[l(r,{label:"禁止下单号段",prop:"forbid_buy_nums"},{label:d(()=>e[23]||(e[23]=[n("span",null,[m("禁止下单号段 "),n("small",{style:{color:"#999999","font-size":"10px","margin-left":"8px"}},"话费/流量生效")],-1)])),default:d(()=>[l(s,{modelValue:t(a).forbid_buy_nums,"onUpdate:modelValue":e[11]||(e[11]=o=>t(a).forbid_buy_nums=o),style:{width:"400px"},clearable:"",placeholder:"多个用英文,隔开，如：147,171"},null,8,["modelValue"])]),_:1})])]),n("div",null,[n("div",ve,[e[25]||(e[25]=n("div",null,"用户必填信息",-1)),l(s,{modelValue:t(p).name,"onUpdate:modelValue":e[12]||(e[12]=o=>t(p).name=o),style:{width:"200px","margin-left":"10px"},clearable:"",placeholder:"请输入组件名称"},null,8,["modelValue"]),l(s,{modelValue:t(p).tip,"onUpdate:modelValue":e[13]||(e[13]=o=>t(p).tip=o),style:{width:"250px","margin-left":"10px"},clearable:"",placeholder:"请输入组件提示内容"},null,8,["modelValue"]),l(C,{type:"primary",style:{"margin-left":"10px"},onClick:I},{default:d(()=>e[24]||(e[24]=[m("新增")])),_:1})]),n("div",ge,[l(v,{inline:!0,model:t(a).user_required_info},{default:d(()=>[(f(!0),h(D,null,S(t(a).user_required_info,(o,g)=>(f(),z(r,{key:g,label:o.name},{default:d(()=>[l(s,{disabled:"",placeholder:o.tip},null,8,["placeholder"])]),_:2},1032,["label"]))),128))]),_:1},8,["model"])])]),n("div",null,[n("div",we,[e[27]||(e[27]=n("div",null,"商家必填信息",-1)),l(s,{modelValue:t(p).name2,"onUpdate:modelValue":e[14]||(e[14]=o=>t(p).name2=o),style:{width:"200px","margin-left":"10px"},clearable:"",placeholder:"请输入组件名称"},null,8,["modelValue"]),l(s,{modelValue:t(p).tip2,"onUpdate:modelValue":e[15]||(e[15]=o=>t(p).tip2=o),style:{width:"250px","margin-left":"10px"},clearable:"",placeholder:"请输入组件提示内容"},null,8,["modelValue"]),l(C,{type:"primary",style:{"margin-left":"10px"},onClick:N},{default:d(()=>e[26]||(e[26]=[m("新增")])),_:1})]),n("div",he,[l(v,{inline:!0,model:t(a).merchant_required_info},{default:d(()=>[(f(!0),h(D,null,S(t(a).merchant_required_info,(o,g)=>(f(),z(r,{key:g,label:o.name},{default:d(()=>[l(s,{disabled:"",placeholder:o.tip},null,8,["placeholder"])]),_:2},1032,["label"]))),128))]),_:1},8,["model"])])]),l(r,{label:"状态",prop:"status"},{default:d(()=>[l(c,{style:{width:"100px","margin-left":"10px"},modelValue:t(a).status,"onUpdate:modelValue":e[16]||(e[16]=o=>t(a).status=o),placeholder:"请选择状态"},{default:d(()=>[l(_,{label:"上架",value:1}),l(_,{label:"下架",value:2})]),_:1},8,["modelValue"])]),_:1}),l(r,{label:"套餐描述",prop:"desc"},{default:d(()=>[l(G,{class:"mb-10",modelValue:t(a).desc,"onUpdate:modelValue":e[17]||(e[17]=o=>t(a).desc=o),height:"500"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title"])])}}});export{Fe as _,Be as a,Re as b};
