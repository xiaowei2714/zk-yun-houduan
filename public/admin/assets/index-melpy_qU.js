import{d as k,j as g,N,O as j,z as A,o as _,a as F,m as e,w as n,e as t,n as I,p as u,B as f,C as w,Q as R,b as q,D as M,E as O,v as Q,$ as G,K as H}from"./index-CjrUTDc7.js";import{_ as J}from"./index.vue_vue_type_script_setup_true_lang-xYG9uRvh.js";import{E as S,a as W}from"./el-table-column-hNjX9l6Z.js";import"./el-checkbox-iUIlu7_W.js";import"./el-tag-fcL6WFhP.js";import{E as X}from"./el-card-B7AqWJI9.js";import{E as Y,a as Z}from"./el-form-item-DulyNOW3.js";import{_ as ee}from"./index.vue_vue_type_script_setup_true_lang-5ZyucrFk.js";import{_ as te}from"./index.vue_vue_type_script_setup_true_lang-b9qdRYWm.js";import{b as y,c as ae,s as oe}from"./consumer-fvPixxFc.js";import{u as ne}from"./usePaging-BRvX9O7P.js";import{_ as se}from"./set-discount.vue_vue_type_script_setup_true_lang-DkbizZ27.js";import"./el-select-C7hSJbGf.js";import"./index-CquG79_W.js";import"./token-DI9FKtlJ.js";import"./isEqual-8JjuuLRw.js";import"./_Uint8Array-DKA781hl.js";import"./_initCloneObject-B8QlPx5z.js";import"./_baseClone-BTyhH2fs.js";/* empty css                       */import"./el-radio-BpPA8Rks.js";import"./index-I8RQE64U.js";import"./index-Cp-_aYzg.js";import"./el-date-picker-5bc_OoKf.js";const le={class:"flex justify-end mt-4"},ie=k({name:"consumerLists"}),Pe=k({...ie,setup(re){const i=g({keyword:"",channel:"",create_time_start:"",create_time_end:""}),l=g({id:0,show:!1,meal_list:[],new_list:[]}),C=(r,a)=>{l.meal_list[r.index].discount=r.value},E=async r=>{l.id=r.id;const a=await ae({user_id:r.id});l.meal_list=a.list,l.show=!0},x=async r=>{await oe({list:l.meal_list}),l.show=!1,d()},{pager:m,getLists:d,resetPage:b,resetParams:D}=ne({fetchFun:y,params:i});return N(()=>{d()}),d(),(r,a)=>{const T=O,c=Y,V=te,p=Q,U=ee,z=Z,v=X,s=S,B=G,L=j("router-link"),$=W,P=J,h=A("perms"),K=H;return _(),F("div",null,[e(v,{class:"!border-none",shadow:"never"},{default:n(()=>[e(z,{ref:"formRef",class:"mb-[-16px]",model:t(i),inline:!0},{default:n(()=>[e(c,{class:"w-[280px]",label:"用户信息"},{default:n(()=>[e(T,{modelValue:t(i).keyword,"onUpdate:modelValue":a[0]||(a[0]=o=>t(i).keyword=o),placeholder:"账号/昵称/手机号码",clearable:"",onKeyup:I(t(b),["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),e(c,{label:"注册时间"},{default:n(()=>[e(V,{startTime:t(i).create_time_start,"onUpdate:startTime":a[1]||(a[1]=o=>t(i).create_time_start=o),endTime:t(i).create_time_end,"onUpdate:endTime":a[2]||(a[2]=o=>t(i).create_time_end=o)},null,8,["startTime","endTime"])]),_:1}),e(c,null,{default:n(()=>[e(p,{type:"primary",onClick:t(b)},{default:n(()=>a[5]||(a[5]=[u("查询")])),_:1},8,["onClick"]),e(p,{onClick:t(D)},{default:n(()=>a[6]||(a[6]=[u("重置")])),_:1},8,["onClick"]),e(U,{class:"ml-2.5","fetch-fun":t(y),params:t(i),"page-size":t(m).size},null,8,["fetch-fun","params","page-size"])]),_:1})]),_:1},8,["model"])]),_:1}),e(v,{class:"!border-none mt-4",shadow:"never"},{default:n(()=>[f((_(),w($,{size:"large",data:t(m).lists},{default:n(()=>[e(s,{label:"ID",prop:"sn","min-width":"100"}),e(s,{label:"头像","min-width":"100"},{default:n(({row:o})=>[e(B,{src:o.avatar,size:50},null,8,["src"])]),_:1}),e(s,{label:"昵称",prop:"nickname","min-width":"100"}),e(s,{label:"账号",prop:"account","min-width":"120"}),e(s,{label:"上级",prop:"parent_user","min-width":"120"}),e(s,{label:"下级",prop:"subordinate_user","min-width":"120"}),e(s,{label:"余额",prop:"user_money","min-width":"120"}),e(s,{label:"今日消费",prop:"user_money","min-width":"120"}),e(s,{label:"总消费",prop:"user_money","min-width":"120"}),e(s,{label:"注册时间",prop:"create_time","min-width":"120"}),e(s,{label:"操作",width:"120",fixed:"right"},{default:n(({row:o})=>[f((_(),w(p,{type:"primary",link:"",onClick:me=>E(o)},{default:n(()=>a[7]||(a[7]=[u(" 折扣 ")])),_:2},1032,["onClick"])),[[h,["notice/edit"]]]),f((_(),w(p,{type:"primary",link:""},{default:n(()=>[e(L,{to:{path:t(R)("user.user/detail"),query:{id:o.id}}},{default:n(()=>a[8]||(a[8]=[u(" 详情 ")])),_:2},1032,["to"])]),_:2},1024)),[[h,["user.user/detail"]]])]),_:1})]),_:1},8,["data"])),[[K,t(m).loading]]),q("div",le,[e(P,{modelValue:t(m),"onUpdate:modelValue":a[3]||(a[3]=o=>M(m)?m.value=o:null),onChange:t(d)},null,8,["modelValue","onChange"])])]),_:1}),e(se,{show:t(l).show,"onUpdate:show":a[4]||(a[4]=o=>t(l).show=o),value:t(l).id,list:t(l).meal_list,onConfirm:x,onUpdateDiscount:C},null,8,["show","value","list"])])}}});export{Pe as default};
