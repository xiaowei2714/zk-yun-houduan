import{d as V,s as j,i as w,j as q,y as F,o as i,a as z,m as o,w as n,e as a,z as c,B as m,p as y,b as E,D as A,C as G,J as D,G as H,eT as J,eU as I,q as K,v as M,H as O}from"./index-TUTPcGtB.js";import{_ as Q}from"./index.vue_vue_type_script_setup_true_lang-Bb-eT6Ya.js";import{E as W,a as X}from"./el-table-column-DdSdIFhN.js";import"./el-checkbox-BvgBD3XW.js";import"./el-tag-Dz7mxGZx.js";import{E as Y}from"./el-card-C9700OUW.js";import{u as Z}from"./usePaging-1LwsvWT7.js";import{u as ee}from"./useDictOptions-CLZK6Ewr.js";import{_ as te,a as oe,b as ae}from"./edit.vue_vue_type_script_setup_true_name_noticeEdit_lang-5hi4KRGV.js";import"./el-select-D0BxjOJU.js";import"./index-BRjKuX5p.js";import"./token-DI9FKtlJ.js";import"./isEqual-4FQJ0tWp.js";import"./_Uint8Array-Br1Bv8aR.js";import"./_initCloneObject-BPF8Ocf1.js";import"./el-form-item-DY1YiJTE.js";import"./_baseClone-m2TTLMcq.js";import"./index.vue_vue_type_style_index_0_lang-BvatHrq6.js";import"./picker-BiXEQcwA.js";import"./index-BoNShnAY.js";import"./index-CL3ny9IX.js";import"./index-BqIR_pNr.js";import"./index-C2kTGegB.js";import"./index-CsbSWT2w.js";import"./el-tree-DEhDC8HP.js";import"./index.vue_vue_type_script_setup_true_lang-DQPE8ybu.js";import"./el-popover-BXREL-Na.js";const ne={class:"mt-4"},se={class:"flex mt-4 justify-end"},le=V({name:"noticeLists"}),je=V({...le,setup(ie){const u=j(),_=w(!1),l=q({type:1}),h=t=>{l.type=t.props.name,p()},C=w([]),T=t=>{C.value=t.map(({id:e})=>e)},{dictData:x}=ee(""),{pager:d,getLists:p,resetParams:re,resetPage:me}=Z({fetchFun:ae,params:l}),$=async()=>{var t;_.value=!0,await D(),(t=u.value)==null||t.open("add",l.type)},B=async t=>{var e,r;_.value=!0,await D(),t.type=l.type,(e=u.value)==null||e.open("edit",l.type),(r=u.value)==null||r.setFormData(t)},k=async t=>{await H.confirm("确定要删除？"),await oe({id:t}),p()};return p(),(t,e)=>{const r=J,N=I,g=Y,P=K,f=M,v=W,L=X,R=Q,b=F("perms"),S=O;return i(),z("div",null,[o(g,{class:"!border-none mb-4",shadow:"never"},{default:n(()=>[o(N,{modelValue:a(l).type,"onUpdate:modelValue":e[0]||(e[0]=s=>a(l).type=s),onTabClick:h},{default:n(()=>[o(r,{label:"首页公告",name:1}),o(r,{label:"话费公告",name:2}),o(r,{label:"电费公告",name:3})]),_:1},8,["modelValue"])]),_:1}),c((i(),m(g,{class:"!border-none",shadow:"never"},{default:n(()=>[c((i(),m(f,{type:"primary",onClick:$},{icon:n(()=>[o(P,{name:"el-icon-Plus"})]),default:n(()=>[e[4]||(e[4]=y(" 新增 "))]),_:1})),[[b,["notice/add"]]]),c((i(),m(f,{disabled:!a(C).length,onClick:e[1]||(e[1]=s=>k(a(C)))},{default:n(()=>e[5]||(e[5]=[y(" 删除 ")])),_:1},8,["disabled"])),[[b,["notice/delete"]]]),E("div",ne,[o(L,{data:a(d).lists,onSelectionChange:T},{default:n(()=>[o(v,{type:"selection",width:"55"}),o(v,{label:"公告标题",prop:"title","show-overflow-tooltip":""}),o(v,{label:"创建时间",prop:"create_time","show-overflow-tooltip":""}),o(v,{label:"操作",width:"120",fixed:"right"},{default:n(({row:s})=>[c((i(),m(f,{type:"primary",link:"",onClick:U=>B(s)},{default:n(()=>e[6]||(e[6]=[y(" 编辑 ")])),_:2},1032,["onClick"])),[[b,["notice/edit"]]]),c((i(),m(f,{type:"danger",link:"",onClick:U=>k(s.id)},{default:n(()=>e[7]||(e[7]=[y(" 删除 ")])),_:2},1032,["onClick"])),[[b,["notice/delete"]]])]),_:1})]),_:1},8,["data"])]),E("div",se,[o(R,{modelValue:a(d),"onUpdate:modelValue":e[2]||(e[2]=s=>A(d)?d.value=s:null),onChange:a(p)},null,8,["modelValue","onChange"])])]),_:1})),[[S,a(d).loading]]),a(_)?(i(),m(te,{key:0,ref_key:"editRef",ref:u,"dict-data":a(x),onSuccess:a(p),onClose:e[3]||(e[3]=s=>_.value=!1)},null,8,["dict-data","onSuccess"])):G("",!0)])}}});export{je as default};
