import{y as c,d as b,s as v,i as B,c as F,j as y,o as U,a as I,m as a,w as p,e as n,b as V,E as P}from"./index-CjrUTDc7.js";import{E as q,a as A}from"./el-form-item-DulyNOW3.js";import{_ as L}from"./index.vue_vue_type_style_index_0_lang-DlslGS9J.js";import{_ as O}from"./picker-DK0Cw9Bb.js";import{P as S}from"./index-I8RQE64U.js";function X(l){return c.get({url:"/notice/lists",params:l})}function T(l){return c.post({url:"/notice/add",params:l})}function $(l){return c.post({url:"/notice/edit",params:l})}function Y(l){return c.post({url:"/notice/delete",params:l})}function z(l){return c.get({url:"/notice/detail",params:l})}const G={class:"edit-popup"},H=b({name:"noticeEdit"}),Z=b({...H,props:{dictData:{type:Object,default:()=>({})}},emits:["success","close"],setup(l,{expose:g,emit:w}){const m=w,f=v(),r=v(),u=B("add"),x=F(()=>u.value=="edit"?"编辑公告":"新增公告"),t=y({id:"",title:"",content:"",type:"",pic:""}),E=y({}),_=async o=>{for(const e in t)o[e]!=null&&o[e]!=null&&(t[e]=o[e])},N=async o=>{const e=await z({id:o.id});_(e)},k=async()=>{var e,s;await((e=f.value)==null?void 0:e.validate());const o={...t};u.value=="edit"?await $(o):await T(o),(s=r.value)==null||s.close(),m("success")},D=(o="add",e)=>{var s;u.value=o,t.type=e,console.log(e),(s=r.value)==null||s.open()},R=()=>{m("close")};return g({open:D,setFormData:_,getDetail:N}),(o,e)=>{const s=P,d=q,C=O,j=L,h=A;return U(),I("div",G,[a(S,{ref_key:"popupRef",ref:r,title:n(x),async:!0,width:"550px",onConfirm:k,onClose:R},{default:p(()=>[a(h,{ref_key:"formRef",ref:f,model:n(t),"label-width":"90px",rules:n(E)},{default:p(()=>[a(d,{label:"公告标题",prop:"title"},{default:p(()=>[a(s,{modelValue:n(t).title,"onUpdate:modelValue":e[0]||(e[0]=i=>n(t).title=i),clearable:"",placeholder:"请输入公告标题"},null,8,["modelValue"])]),_:1}),a(d,{label:"公告封面",prop:"pic"},{default:p(()=>[V("div",null,[a(C,{modelValue:n(t).pic,"onUpdate:modelValue":e[1]||(e[1]=i=>n(t).pic=i),limit:1},null,8,["modelValue"]),e[3]||(e[3]=V("div",{class:"form-tips"},"建议尺寸：100*100px，支持jpg，jpeg，png格式",-1))])]),_:1}),a(d,{label:"公告内容",prop:"content"},{default:p(()=>[a(j,{class:"flex-1",modelValue:n(t).content,"onUpdate:modelValue":e[2]||(e[2]=i=>n(t).content=i),height:500},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title"])])}}});export{Z as _,Y as a,X as b};
